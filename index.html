<!DOCTYPE html>
<html lang="en">
<head>
	<title>Gaming Shop</title>
	<meta charset="UTF-8">
	<link href="/css/layout.css" rel="stylesheet" type="text/css" />
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width,initial-scale=1, maximum-scale=1, user-scalable=no" />
</head>
<body >
	<div id="app"></div>
    <script src="/js/bundle.js"></script>
    <script src="/js/index.js"></script>
<script>
//this is used to show the user the item they have selected has been added to the cart.
//Had to put my javascript in here for it to work because in the .js file it would not responsed if placed there.	
function linkHandler(name, price)
{
    alert(name);
    alert(price);
	var name = name;
    var price = price;
    var cartItem = new item(name, parseFloat(price));
            // looks for a duplicate
            var match = ko.utils.arrayFirst(viewModel.cartItems(), function(item){ return item.name == name; });
            if(match){
                match.qty(match.qty() + 1);
            } else {
              viewModel.cartItems.push(cartItem);
var rowCount = document.getElementById("cartcontent1").getElementsByTagName("TR").length;
document.getElementById("Totala").innerHTML = rowCount;
            }
}

//javascript to make the total of the cart appear but had trouble actually displaying the total amount of games
var data = {"total":0,"rows":[]};
var totalCost = 0;
function addProduct(name,price){
    function add(){
        for(var i=0; i<data.total; i++){
            var row = data.rows[i];
            if (row.name == name){
                row.quantity += 1;
                return;
            }
        }
        data.total += 1;
        data.rows.push({
            name:name,
            quantity:1,
            price:price
        });
    }
    add();
    totalCost += price;
    $('#cartcontent1').datagrid('loadData', data);
    $('div.cart .total').html('Total: $'+totalCost);
}    </script>
</body>
</html>
